<h1>メッセージを送る</h1>

<%= form_with(model: @message, local: true) do |form| %>
  <% if @message.errors.any? %>
    <div id="error_explanation">
      <h2><%= @message.errors.count %> エラーがあってメッセージ送信が失敗しました。</h2>
    </div>
  <% end %>

  <div class="field">
    <%= render "form_item_errors", errors: @message.errors, attribute: :receiver_id %>
    <%= form.label :receiver %>
    <%= form.collection_select :receiver_id, User.all, :id, :email, prompt: true %>
  </div>

  <%= render "form_item", attribute: :subject, form: form, errors: @message.errors %>

  <div class="field">
    <%= render "form_item_errors", errors: @message.errors, attribute: :content %>
    <%= form.label :content %>
    <%= form.text_area :content, size: "50x10" %>
  </div>

  <div class="actions">
    <%= form.submit %>
  </div>
<% end %>

<%= link_to "受信トレイメッセージ", received_messages_path %>  | 
<%= link_to "送信済みメッセージ", sent_messages_path %>
